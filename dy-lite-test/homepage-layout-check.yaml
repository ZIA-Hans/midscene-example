# 功能: 首页定制检查
# 预置条件: 后台已配置首页

android:
  # 请替换为你的设备 ID (通过 adb devices 获取)
  deviceId: a23456ae

tasks:
  - name: 进入小程序首页
    flow:
      - ai: 保持位于小程序首页
      # 假设已通过其他方式进入喜马小程序
      - sleep: 3000

  - name: 验证首页元素布局
    flow:
      # 验证搜索栏
      - aiAssert: 页面顶部存在搜索栏和搜索按钮

      # 验证广告Banner
      - aiAssert: 搜索栏下方存在广告Banner区域

      # 验证听单模块 - 从上至下顺序
      - aiAssert: 页面中存在"热门推荐"听单模块
      - aiAssert: 页面中存在"新品特供"听单模块

      # 向下滚动查看更多听单
      - aiAction: 向下滑动页面

      - aiAssert: 页面中存在"悬疑精选"听单模块
      - aiAssert: 页面中存在"人文历史"听单模块
      - aiAssert: 页面中存在"爆笑相声"听单模块

  - name: 提取首页布局信息
    flow:
      # 提取页面模块信息用于验证
      - aiQuery: >
          {moduleName: string, position: number}[], 返回页面中所有可见的听单模块名称及其从上到下的位置顺序
        name: homepage_modules

