# 功能: 非VIP账号点击VIP单集购买音频购买流程
# 预置条件: 非VIP账号已登录

agent:
  testId: "WeChat_Mini_Program_Basic_20"
  groupName: "VIP单集购买流程"
  generateReport: true
  aiActContext: "非VIP账号已登录，点击既是vip又是单集购买的音频后验证购买流程"

android:
  deviceId: "${ANDROID_DEVICE_ID}"

tasks:
  - name: "非VIP账号VIP单集购买流程"
    flow:
      - aiWaitFor: "非VIP账号已登录"
      - ai: "点击vip音频"
      - aiWaitFor: "弹出选择购买方式的半浮层"
      - aiAssert: "点击vip音频后弹出选择购买方式的半浮层"
        errorMessage: "未弹出购买方式选择半浮层"
        name: "verify_purchase_option_popup"
      - aiTap: "选择'全集vip免费听'"
      - aiTap: "点击'立即购买'按钮"
      - aiWaitFor: "弹出vip的sku半浮层"
      - aiAssert: "选择'全集vip免费听'，点击'立即购买'按钮后会弹出vip的sku半浮层"
        errorMessage: "未弹出vip的sku半浮层"
        name: "verify_vip_sku_popup"
      - aiKeyboardPress: "Back"
      - aiWaitFor: "返回上一页"
      - ai: "再次点击vip音频"
      - aiWaitFor: "弹出选择购买方式的半浮层"
      - aiTap: "选择'本集0.15元'"
      - aiTap: "点击'立即购买'按钮"
      - aiWaitFor: "跳转到订单页"
      - aiAssert: "选择'本集0.15元'，点击'立即购买'按钮后跳转到订单页"
        errorMessage: "未跳转到订单页"
        name: "verify_order_page"

