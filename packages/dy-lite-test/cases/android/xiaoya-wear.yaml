# MidScene Android AI交互功能自动化测试脚本
# 基于用户提供的测试用例转换而成，适用于Android平台

# AI代理配置
agent:
  testId: "android-ai-interaction-test"
  groupName: "Android AI交互功能测试套件"
  groupDescription: "测试Android平台AI交互和快捷AI交互功能的完整流程"
  generateReport: true
  autoPrintReportMsg: true
  reportFileName: "android-ai-interaction-report"
  replanningCycleLimit: 25
  aiActContext: "这是Android平台的AI交互测试场景，包含小雅图标点击、文字输入、语音播报等功能。假设应用已安装并登录成功。"

# Android环境配置
android:
  # 设备ID，实际使用时需要替换为真实设备ID
  deviceId: "a23456ae"  # 模拟器ID或真实设备ID
  # # 应用启动配置
  # launch:
  #   # 应用包名，实际使用时需要替换
  #   appPackage: "com.example.aiassistant"
  #   # 应用启动Activity
  #   appActivity: "com.example.aiassistant.MainActivity"
  # # 等待应用启动超时
  # launchTimeout: 30000
  # # ADB命令超时
  # adbTimeout: 15000

# 测试任务定义
tasks:
  # 任务1: 进入GUI发起AI交互
  - name: "basic_1: 进入GUI发起AI交互"
    continueOnNetworkIdleError: false
    flow:
      # 步骤1: 等待应用启动完成
      # - sleep: 5000
      
      # 步骤2: 首页点击小雅图标
      - ai: "点击首页上的小雅图标，进入AI交互界面"
        # deepThink: true
        # cacheable: true
      
      # 等待界面加载
      - sleep: 3000
      
      # 验证上方Banner元素
      - aiAssert: "页面上方应该显示小雅图标、电话按钮、声音按钮和设置按钮"
        errorMessage: "上方功能按钮不完整"
        name: "check_top_buttons"
      
      # 验证中间文字展示区域
      - aiAssert: "页面应该有文字输入和展示区域,类似AI Chat的样式"
        errorMessage: "中间交互区域缺失"
        name: "check_middle_area"
      
      # 验证下方Banner元素
      - aiAssert: "页面下方应该显示深度思考、AI搜索和实时通话功能按钮"
        errorMessage: "下方功能按钮不完整"
        name: "check_bottom_buttons"
      
      # 步骤3: 输入文字"今天天气怎么样？"
      - ai: "点击最下方的输入框，激活它"
        deepThink: true
        cacheable: true
      
      - sleep: 1000
      
      - aiInput: "今天天气怎么样？"
        locate: "在已激活的输入框中输入文字"
        deepThink: true
        cacheable: true
      
      # 点击发送按钮
      - ai: "点击下方的红色的按钮提交查询"
        deepThink: true
        cacheable: true
      
      # 步骤4: 等待OS返回内容
      - sleep: 1000
      
      # 验证内容返回状态
      - aiAssert: "页面应该显示加载中的状态提示"
        errorMessage: "加载状态未显示"
        name: "check_loading_status"
      
      # 等待内容加载完成
      - sleep: 3000
      
      # 验证内容返回
      - aiAssert: "页面应该显示返回的天气信息内容"
        errorMessage: "未获取到天气信息"
        name: "check_weather_content"
      
      # 步骤5: 查看TTS播报
      - aiAssert: "页面应该显示语音正在播放的状态"
        errorMessage: "语音播放状态未显示"
        name: "check_tts_playing"
      
      # 等待播报结束
      - sleep: 10000
      
      # 验证播报结束状态
      - aiAssert: "页面应该显示语音播放已完成的状态"
        errorMessage: "语音播放状态未更新"
        name: "check_tts_completed"
  
  # 任务2: 快捷AI交互
  # - name: "basic_2: 快捷AI交互测试"
  #   continueOnNetworkIdleError: false
  #   flow:
  #     # 返回首页
  #     - aiTap: "点击返回按钮回到应用首页"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 2000
      
  #     # 步骤1: 点击"追时事"
  #     - aiTap: "点击首页Banner区域的'追时事'快捷按钮"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 3000
      
  #     # 验证自动发送指令
  #     - aiAssert: "页面应该显示正在获取每日新鲜事"
  #       errorMessage: "未触发时事新闻查询"
  #       name: "check_news_query"
      
  #     # 等待内容返回
  #     - sleep: 7000
      
  #     # 验证热点新闻返回
  #     - aiAssert: "页面应该显示热点新闻列表或内容"
  #       errorMessage: "未获取到新闻内容"
  #       name: "check_news_content"
      
  #     # 返回首页
  #     - aiTap: "点击返回按钮回到应用首页"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 2000
      
  #     - ai: "找到位于小雅下方的模块，找到"
  #     # 步骤2: 点击"问天气"
  #     - aiTap: "点击首页Banner区域的'问天气'快捷按钮"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 3000
      
  #     # 验证自动发送指令
  #     - aiAssert: "页面应该显示正在查询今天天气"
  #       errorMessage: "未触发天气查询"
  #       name: "check_weather_query"
      
  #     # 等待内容返回
  #     - sleep: 6000
      
  #     # 验证天气信息返回
  #     - aiAssert: "页面应该显示今天的天气情况"
  #       errorMessage: "未获取到天气信息"
  #       name: "check_weather_result"
      
  #     # 返回首页
  #     - aiTap: "点击返回按钮回到应用首页"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 2000
      
  #     # 步骤3: 点击"聊心情"
  #     - aiTap: "点击首页Banner区域的'聊心情'快捷按钮"
  #       deepThink: true
  #       cacheable: true
      
  #     - sleep: 3000
      
  #     # 验证自动发送指令
  #     - aiAssert: "页面应该显示正在进行聊天交互"
  #       errorMessage: "未触发聊天功能"
  #       name: "check_chat_query"
      
  #     # 等待内容返回
  #     - sleep: 6000
      
  #     # 验证聊天内容返回
  #     - aiAssert: "页面应该显示聊天回复内容"
  #       errorMessage: "未获取到聊天回复"
  #       name: "check_chat_response"
      
  #     # 提取聊天内容
  #     - aiQuery: "提取页面上显示的聊天回复文本内容"
  #       name: "chat_response_text"

# 测试完成
  - name: "测试完成"
    flow:
      - ai: "Android AI交互测试全部完成，生成测试报告"
        cacheable: true